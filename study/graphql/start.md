## GraphQLとは

## 用語

| 用語 | 意味 |
| :--- | :--- |
| スキーマ Schema | クエリ、型などの定義を行うもの |
| リゾルバ Resolver | 実際のデータ操作を行うもの |
| SDL | Schema Definition Language の略 |

## GraphQL Schema-First と Code-First

Schema-First と Code-First、いずれも GraphQL 開発の手法の名称である。

### Schema-First

Schema-Firstアプローチでは、まずGraphQLスキーマを定義し、それに基づいてリゾルバ（データの取得と操作を処理する関数）を実装する。  
スキーマは通常、GraphQLのタイプやクエリ、ミューテーション、サブスクリプションなどを記述する。  
このアプローチの主な利点として、APIの形状が明確に定義されるため、クライアントとサーバ間の契約が明確になり、コミュニケーションやバージョン管理がしやすくなる点が挙げられる。

- 契約が明確: スキーマによってAPIの形状が明確に定義され、クライアントとのコミュニケーションが容易になる。
- ドキュメント生成: スキーマから自動的にドキュメントが生成されることが多い。
- クライアント側の型生成: スキーマからクライアント側の型が生成され、型安全性が向上する。

### Code-First

まずプログラムコード（一般的にはプレーンなクラスや関数）を記述し、それに基づいてGraphQLスキーマが自動的に生成される。  
スキーマがコードから生成されるため、コードとスキーマが一貫して保たれる利点がある。  
一部のフレームワークでは、デコレータやアノテーションを使用してスキーマの定義を行う。

- プログラム的な柔軟性: コードを使用してスキーマを生成するため、柔軟なカスタマイズや高度なロジックが可能になる。
- 既存コードの統合: 既存のクラスやデータモデルからスキーマを生成しやすい。
- コードとスキーマの一貫性: コードとスキーマが同じリポジトリ内に存在し、一貫性が保たれる。

### どちらが優れているか

どちらが優れているかは、プロジェクトの要件に依存する。  
もしAPIの形状が重要であり、クライアントとの契約を明確にしたい場合はSchema-Firstが適しているかもしれない。  
一方、柔軟なロジックや既存のコードとの統合が主要な要件である場合は、Code-Firstが有益かもしれない。

最終的には、プロジェクトのニーズ、チームのスキルセット、開発スピードなどを考慮して、どちらのアプローチが最適かを判断することが重要となる。

## 参考リンク

- [Schema-First vs Code-Only GraphQL - Apollo GraphQL Blog](https://www.apollographql.com/blog/backend/architecture/schema-first-vs-code-only-graphql/)